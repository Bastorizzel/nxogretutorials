<!doctype html>
<html>
<head>
	<title>NxOgre - A Guide</title>
	<link rel="stylesheet" href="screen.css" media="all">
</head>
<body>
	<div id="content">
		<h1>Block 1.2 - Length and Angles</h1>
		<div class="document">
<p>In this chapter lengths and angles are discussed. If you've used Ogre or any modern 3D engine before, then it is more than likely you've encountered the Vector and Quaternion classes.</p>
<div class="section" id="lengths-and-distances">
<h1>Lengths and Distances</h1>
<p>We should all know what lengths are, we use them all day. From estimating the distance when throwing a ball, to measuring the length of your waist to see if you will fit into that pair of trousers from when you were younger.</p>
<p>Mathamatically they are described as the differences between two points in space. The difference between lengths and distances is, the subject matter. Lengths are the difference between two points of the same connected body; a car, house, or a person. Distances are between two points of that are not connected; two cars, two houses, or two people.</p>
<p><div class="image-center"><img src="distancesm.png" /></div></p>
<blockquote>
<p><strong>Question 1.1</strong></p>
<p>John and I are going to football practise for the first time. After looking at the map, we find it is about 1000 metres away. Halfway through, we notice that the football field is only 30 metres across someone's garden.</p>
<p>If we hop over the garden; How what is the distance we would of walked, and how much of the journey did we save?</p>
<p><a href="block1_a.html#answer1_1">Answer</a></p>
</blockquote>
<p>Our term of &quot;length&quot; are still pretty generic. There are many variations of the word; <em>Breadth</em>, <em>Width</em>, <em>Thickness</em>, even <em>Radius</em> and <em>Diameter</em> could be lengths.</p>
<p>So what is exactly a length? Well, a measurement of a dimension of an object is a good definition, a better one would be it's the length between two extreme points of an object. This tree is three metres tall, that house is 12 metres wide, my car's rims are 50 centimetres in diameter.</p>
<p><div class="image-center"><img src="lengthsm.png" /></div></p>
<p>In NxOgre, you'll be using different types of lengths to describe different shapes. You've already met a the <strong>Box</strong>, in the above diagram, but here is a list of the other shapes that uses lengths:</p>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="64%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Shape</th>
<th class="head">Lengths used</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>Box</td>
<td>Width, Length and Height</td>
</tr>
<tr><td><strong>Sphere</strong></td>
<td>Radius</td>
</tr>
<tr><td><strong>Capsule</strong></td>
<td>Radius and Height</td>
</tr>
<tr><td><strong>Wheel</strong></td>
<td>Radius</td>
</tr>
<tr><td><strong>HeightField</strong></td>
<td>Width and Length</td>
</tr>
</tbody>
</table>
<p>Some shapes don't use lengths atll; Convex and Triangle Geometries for example. Ground shape is the most peculiar it uses distances and directions!</p>
<p>You'll meet more of the shapes in a later chapter, and blocks.</p>
<blockquote>
<p><strong>Question 1.2</strong></p>
<p>My sister and I are trying to break a world record by stacking wooden blocks on top of each other into a tower. We are not sure how high the tower is. But we know how many blocks we used, and the width and length of the tower.</p>
<ul>
<li><p class="first"><strong>Blocks</strong> 15000</p>
</li>
<li><dl class="first docutils">
<dt><strong>Tower size</strong></dt>
<dd><ul class="first last simple">
<li>Width 25cm</li>
<li>Length 25cm</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>Block size</strong></dt>
<dd><ul class="first last simple">
<li>Width 5cm</li>
<li>Length 1cm</li>
<li>Height 1.5cm</li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>Assuming each block is the same size. How high is the tower?</p>
<p><a href="block1_a.html#answer1_2">Answer</a></p>
</blockquote>
</div>
<div class="section" id="vectors">
<h1>Vectors</h1>
<p>To express lengths, distances and of course directions in NxOgre, we use a vector. If you've ever taken an advanced course in Mathmatics then yes, the vector is exactly like a <a class="reference external" href="http://en.wikipedia.org/wiki/Euclidean_vector">vector</a>.</p>
<p><div class="image-center"><img src="vector1.png" /></div></p>
<p>At first glance a vector is just a point in space, as it carries the x, y, z components with it. Depending on the use of the vector it may be a coordinate, size or a normal.</p>
<div class="section" id="coordinates">
<h2>Coordinates</h2>
<p>Coordinates you should be already familar with. They are simply distances in each dimension away from another point.</p>
<div class="equation-block"><img src="eq/c0393f813304ea37b595898a87223222.png" alt="\mathbf{V} = \begin{pmatrix}
2.0 \ 6.0 \ 4.0\end{pmatrix}" /></div>
<p>Coordinates may be refered in &quot;Global Frame&quot; or &quot;Local Frame&quot;, the difference being is how they refer to an arbitrary point. In Global Space, a giraffe paperweight's position would be in reference to the world center (0,0,0), where as in local space the paperweights position would be refered to where the paperweight is placed upon or attached to; i.e. a piece of paper.</p>
<p><div class="image-center"><img src="referenceframes.png" /></div></p>
<p>In NxOgre, nearly everything is referred to in the Global frame, but in Ogre due to the use of the Scene Graph global and local frame are used frequently.</p>
</div>
<div class="section" id="normals">
<h2>Normals</h2>
<p>Normals can represent velocities, directions and direction of faces of triangles.</p>
<p><div class="image-center"><img src="vector3.png" /></div></p>
<p>Although normals are vectors, they are technically two components; a magnitude (length of the vector), and normalised direction. The magnitude is the length of the line between the world center (0,0,0) to the normal position; e.g. (10,12,5) and the direction is the norm of the vector:</p>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="72%" />
<col width="16%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Component</th>
<th class="head">Operation</th>
<th class="head">Function</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><strong>Magnitude</strong></td>
<td><div class="equation-block"><img src="eq/40c99f1ac18ba81b6a3c9a6b5151666b.png" alt="||\mathbf{m}|| = \sqrt{x^2 + y^2 + z^2}" /></div>
</td>
<td><code class="code-inline">Vec3::magnitude</code></td>
</tr>
<tr><td><strong>Direction</strong></td>
<td><div class="equation-block"><img src="eq/fabac689166491d563e766905d3befd5.png" alt="\mathbf{v}_i &= \mathbf{v}_i \times \frac{1}{||\mathbf{m}||}\;\;\;(i = 0,1,2)." /></div>
</td>
<td><code class="code-inline">Vec3::normalise</code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="sizes">
<h2>Sizes</h2>
<p>Sizes in NxOgre are expressed in according to the subject matter. Boxes require three dimensions; Width, Length, and Height. Capsules only require a radius and height so that is just two, and Spheres just one; a radius.</p>
<p>When giving a size to NxOgre, you will need to use the correct data type. These would be Vectors with three components, two components or a single Real type. In some cases, you can use an alternate with three Reals or two Reals if you prefer.</p>
<div class="equation-block"><img src="eq/ff7d24bf1defd22a6006e3f3aaecbf32.png" alt="S_{box} &= \begin{pmatrix}
1.0 \unit{m} &  2 \unit{m} &  1.0 \unit{m}\end{pmatrix}    \
S_{capsule} &= \begin{pmatrix}
0.5 \unit{m} &  1.85 \unit{m}\end{pmatrix}      \
S_{sphere} &= 0.5 \unit{m}" /></div>
<p>As a size may use upto dimensions to describe it's size, it is useful to know which dimension in the contex of a size means.</p>
<p>Using a capsule as an example; X is the first dimension, so it's usually the distance to the end of the shape to it's centre.A capsule's radius is the first dimension, so X is the capsule's radius.
Y is the second dimension, and we commonly use Y as up then Y is the shape's height.
Z is the last dimension, and not used in a capsule. But it's usually the shapes length.</p>
<p><div class="image-center"><img src="vector4.png" /></div></p>
</div>
<div class="section" id="nxogre-vec2-and-nxogre-vec3">
<h2>NxOgre::Vec2 and NxOgre::Vec3</h2>
<p>In NxOgre, Ogre and PhysX classes are reserved to hold two or dimensional components; x, y and sometimes z, these are Real types. It is unlikely you'll use the PhysX version of these, but NxOgre's are called <strong>Vec2</strong> and <strong>Vec3</strong>. Ogre has it's own version called Vector2 and Vector3. There is no &quot;Vec1&quot; class as this would be a Real type.</p>
<p>For now, we will concentrate on the most popular type of Vector; Vec3:</p>
<div class="code-block"><pre><span class="r">namespace</span> NxOgre
{
    <span class="r">class</span> <span class="cl">Vec3</span>
    {
        <span class="di">public</span>:
         Vec3() : x(<span class="i">0</span>), y(<span class="i">0</span>), z(<span class="i">0</span>) { }
         Vec3(<span class="di">const</span> Vec3&amp; vec3) : x(other.x), y(other.y), z(other.z)

         <span class="c">// ...</span>

         Real x, y, z;

    };
}</pre></div>
<p>The vector's components; x, y and z are left pubically open. It would be inefficent to have setX, getX, setY, getY, setZ and getZ functions, and as there is no such thing as a &quot;Bad Vector&quot; from the user giving an wrong value, the user can safely do any math operations upon them.</p>
<p>However, there are a number of in built helper functions that can be used.</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="42%" />
<col width="38%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Function</th>
<th class="head">Operation</th>
<th class="head">Pseudo Code</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>set(x,y,z)</td>
<td><div class="equation-block"><img src="eq/28237488b487152d6ca22bfd763a433d.png" alt="\mathbf{V_x} &= x \
\mathbf{V_y} &= y \
\mathbf{V_z} &= z" /></div>
</td>
<td><div class="code-block"><pre>x := x
y := y
y := z</pre></div>
</td>
</tr>
<tr><td>operator= (other)</td>
<td><div class="equation-block"><img src="eq/92c9833c20837f29672dec352dee1c2e.png" alt="\begin{pmatrix}
\mathbf{V_{other_x}} \
\mathbf{V_{other_y}} \
\mathbf{V_{other_z}}\end{pmatrix}" /></div>
</td>
<td><div class="code-block"><pre>x := other.x
y := other.y
z := other.z</pre></div>
</td>
</tr>
<tr><td>operator+ (other)</td>
<td><div class="equation-block"><img src="eq/d693de87864a9584780a043ec60930ba.png" alt="\mathbf{V} + \mathbf{V_{other}}" /></div>
</td>
<td><div class="code-block"><pre>x := x + other.x
y := y + other.y
z := z + other.z</pre></div>
</td>
</tr>
<tr><td>normalise</td>
<td><div class="equation-block"><img src="eq/98d3546c0cbd0365b40c6f6a8676e9a1.png" alt="\begin{pmatrix}
\mathbf{V_x} \times \frac{
1}{||\mathbf{M}||} \
\mathbf{V_y} \times \frac{
1}{||\mathbf{M}||} \
\mathbf{V_z} \times \frac{
1}{||\mathbf{M}||}\end{pmatrix}" /></div>
</td>
<td><div class="code-block"><pre>Real m := magnitude
m := magnitude
x := x * <span class="i">1</span> / m
y := y * <span class="i">1</span> / m
z := z * <span class="i">1</span> / m
<span class="r">return</span> m</pre></div>
</td>
</tr>
<tr><td>magnitude</td>
<td><div class="equation-block"><img src="eq/683b34df191bababbcf6c853b53b7d8f.png" alt="|| \mathbf{V} ||" /></div>
</td>
<td><div class="code-block"><pre>SQRT(x*x + y*y + z*z)</pre></div>
</td>
</tr>
<tr><td>cross(other)</td>
<td><div class="equation-block"><img src="eq/679207e393700a13a039162750952fd2.png" alt="\mathbf{V} \times \mathbf{V_{other}}" /></div>
</td>
<td><div class="code-block"><pre>Vec3 out
out.x := y * other.z - z * other.y
out.y := z * other.x - x * other.z
out.z := x * other.y - y * other.x
<span class="r">return</span> out</pre></div>
</td>
</tr>
<tr><td>dot(other)</td>
<td><div class="equation-block"><img src="eq/f23a99fdfddb584d9df90564e036922d.png" alt="\mathbf{V} \cdot \mathbf{V_{other}}" /></div>
</td>
<td><div class="code-block"><pre>Real out
out := x * other.x
out := out + (y * other.y)
out := out + (z * other.z)
<span class="r">return</span> out</pre></div>
</td>
</tr>
<tr><td>mid(other)</td>
<td><div class="equation-block"><img src="eq/679207e393700a13a039162750952fd2.png" alt="\mathbf{V} \times \mathbf{V_{other}}" /></div>
</td>
<td><div class="code-block"><pre>Vec3 out
out.x := (x + other.x) / <span class="i">2</span>
out.y := (y + other.y) / <span class="i">2</span>
out.z := (z + other.z) / <span class="i">2</span>
<span class="r">return</span> out</pre></div>
</td>
</tr>
<tr><td>mid(other)</td>
<td><div class="equation-block"><img src="eq/02ab54f1e641376aa9f352277b3c1233.png" alt="|| \mathbf{V} - \mathbf{V_{other}} ||" /></div>
</td>
<td><div class="code-block"><pre>Vec3 out
out := self - other
<span class="r">return</span> out.magnitude</pre></div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="angles">
<h1>Angles</h1>
<p><div class="image-center"><img src="radiansdegrees.png" /></div></p>
</div>
<div class="section" id="quaternions">
<h1>Quaternions</h1>
<p>Text</p>
<hr />
<p><a href="block1_1.html">Previous</a> | <a href="block1_3.html">Next</a></p>
</div>
</div>
	</div>
	<div id="nav">
		<a href="index.html">Frontmatter</a> | <a href="introduction.html">Introduction</a> | <a href="block1.html">Block 1</a>
	</div>
</body>